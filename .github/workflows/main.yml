name: PR Notifier (issue #23)

on:
  pull_request:
    types: [opened, reopened, synchronize, review_requested]

# Permiss√µes m√≠nimas para comentar no PR
permissions:
  contents: read
  pull-requests: write

jobs:
  notify-reviewer:
    runs-on: ubuntu-latest
    steps:
      - name: Comentar no PR e mencionar @IGE-122989
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const prNumber = pr.number;
            const prTitle  = pr.title;
            const prUrl    = pr.html_url;
            const author   = pr.user.login;

            // Mensagem padr√£o
            let body = [
              "üëã **Notifica√ß√£o de revis√£o**",
              "",
              `**PR**: #${prNumber} ‚Äî ${prTitle}`,
              `**Autor**: @${author}`,
              `**Liga√ß√£o**: ${prUrl}`,
              "",
              "Respons√°vel/Reviewer: @IGE-122989",
              "",
              "Contexto: conforme acordado na **issue #23**:",
              "https://github.com/IGE-122989/DiscoveriesBattleshipGame/issues/23",
              "",
              "> Por favor, proceder √† revis√£o quando poss√≠vel. Obrigado!"
            ].join("\n");

            // Cria o coment√°rio no pr√≥prio PR (PRs s√£o Issues para efeitos de coment√°rios)
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body
            });
